webpackJsonp([99],{"RLO/":function(t,e,a){"use strict";function s(t){a("sVDK")}Object.defineProperty(e,"__esModule",{value:!0});var n=a("a3Yh"),i=a.n(n),l=a("5HJ5"),r=a("2sCs"),o=a.n(r),c={mixins:[l.a],data:function(){return{params:{title:"",status:"",siteId:"",targetSiteId:""},sites:[],targetSites:[],targetSiteIds:[""],siteIds:[""]}},methods:{aduit:function(t){var e=this;this.loading=!0,o.a.post(this.$api.contentShareAduit,i()({ids:t},"ids",t)).then(function(t){e.loading=!1,"200"==t.code&&e.successMessage("审核成功")}).catch(function(t){e.loading=!1})},query:function(){this.params.siteId=this.siteIds[this.siteIds.length-1],this.params.targetSiteId=this.targetSiteIds[this.targetSiteIds.length-1],this.getTableData(this.params)},getSite:function(){var t=this;o.a.post(this.$api.siteTree).then(function(e){"200"==e.code&&(t.sites=[{name:"共享源站点",id:""}],t.targetSites=[{name:"共享目标站点",id:""}],t.sites=t.sites.concat(e.body),t.targetSites=t.targetSites.concat(e.body))})}},created:function(){this.initTableData(this.$api.contentShareList,this.params),this.getSite()}},d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"cms-body"},[a("div",{staticClass:"cms-list-header"},[a("cms-input",{attrs:{label:"标题"},model:{value:t.params.title,callback:function(e){t.$set(t.params,"title",e)},expression:"params.title"}}),t._v(" "),a("el-radio-group",{model:{value:t.params.status,callback:function(e){t.$set(t.params,"status",e)},expression:"params.status"}},[a("el-radio",{attrs:{label:-1}},[t._v("全部")]),t._v(" "),a("el-radio",{attrs:{label:0}},[t._v("待审")]),t._v(" "),a("el-radio",{attrs:{label:1}},[t._v("通过")]),t._v(" "),a("el-radio",{attrs:{label:2}},[t._v("推送")])],1),t._v(" "),a("el-cascader",{staticClass:"cms-width",attrs:{props:{value:"id",label:"name",children:"child"},options:t.sites,"change-on-select":"",filterable:""},model:{value:t.siteIds,callback:function(e){t.siteIds=e},expression:"siteIds"}}),t._v(" "),a("el-cascader",{staticClass:"cms-width",attrs:{props:{value:"id",label:"name",children:"child"},options:t.targetSites,"change-on-select":"",filterable:""},model:{value:t.targetSiteIds,callback:function(e){t.targetSiteIds=e},expression:"targetSiteIds"}}),t._v(" "),a("el-button",{on:{click:t.query}},[t._v("查询")])],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""},on:{"selection-change":t.checkIds}},[a("el-table-column",{attrs:{type:"selection",width:"65",align:"right"}}),t._v(" "),a("el-table-column",{attrs:{prop:"id",label:"ID",width:"50",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"标题",width:"500",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{staticClass:"overflow-text"},[e.row.shared&&t.$getSiteId()==e.row.contentSiteId?a("span",{staticClass:"red-color",attrs:{title:"共享给其他站点的内容"}},[t._v("[源]\n        ")]):t._e(),t._v(" "),a("span",{staticClass:"cms-channel-name font-bold"},[t._v("["+t._s(e.row.contentChannelName)+"]")]),t._v(" "),a("a",{staticClass:"link",attrs:{href:e.row.url,title:e.row.title,target:"_blank"}},[t._v(t._s(e.row.title))])])}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"username",label:"源栏目",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.contentSiteName)+"->"+t._s(e.row.contentChannelName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"目标栏目",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.channelSiteName)+"->"+t._s(e.row.channelName))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"username",width:"",label:"发布者",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"releaseDate",label:"发布时间",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"checkStatus",label:"状态",width:"50px",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.checkStatus?a("span",[t._v("待审")]):t._e(),t._v(" "),1==e.row.checkStatus?a("span",[t._v("通过")]):t._e(),t._v(" "),2==e.row.checkStatus?a("span",[t._v("推送")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return a("div",{},[a("cms-button",{directives:[{name:"perms",rawName:"v-perms",value:"/contentShare/view",expression:"'/contentShare/view'"}],attrs:{type:"view"},nativeOn:{click:function(a){t.routerLink("/contentShare/view","update",e.row.contentId)}}}),t._v(" "),a("cms-button",{directives:[{name:"perms",rawName:"v-perms",value:"/contentShare/delete",expression:"'/contentShare/delete'"}],attrs:{type:"delete"},nativeOn:{click:function(a){t.deleteBatch(t.$api.contentShareDelete,e.row.id)}}})],1)}}])})],1),t._v(" "),a("div",{staticClass:"cms-list-footer"},[a("div",{staticClass:"cms-left"},[a("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/contentShare/delete",expression:"'/contentShare/delete'"}],attrs:{disabled:t.disabled},on:{click:function(e){t.deleteBatch(t.$api.contentShareDelete,t.ids)}}},[t._v("删除共享\n      ")]),t._v(" "),a("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/contentShare/aduit",expression:"'/contentShare/aduit'"}],attrs:{disabled:t.disabled},on:{click:function(e){t.aduit(t.ids)}}},[t._v("审核\n      ")])],1),t._v(" "),a("cms-pagination",{attrs:{total:t.total},on:{change:t.getPages}})],1)],1)},u=[],p={render:d,staticRenderFns:u},v=p,h=a("Mw9A"),m=s,_=h(c,v,!1,m,"data-v-5606f063",null);e.default=_.exports},sVDK:function(t,e,a){var s=a("xbh9");"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);a("8bSs")("408a1d14",s,!0)},xbh9:function(t,e,a){e=t.exports=a("BkJT")(!1),e.push([t.i,"\n.red-color[data-v-5606f063]{\n  color: red;\n}\n.font-bold[data-v-5606f063]{\n  font-weight: bold;\n}\n",""])}});