webpackJsonp([96],{"2TVX":function(e,t,i){"use strict";function n(e){i("XiJN")}Object.defineProperty(t,"__esModule",{value:!0});var a=i("HzJ8"),r=i.n(a),o=i("5HJ5"),s=i("2sCs"),l=i.n(s),d={mixins:[o.a],data:function(){return{params:{queryStatus:"",queryTypeId:"",queryTopLevel:"",queryRecommend:"",queryUsername:"",queryTitle:"",queryOrderBy:"",querySiteId:"",pageNo:"",pageSize:""},types:[],labelDialogTitle:"",dialogVisible:!1,operateType:"",currentCheckChannelId:"",props:{label:"name",children:"zones",isLeaf:"isChild",id:"id"}}},methods:{getTableData:function(e){var t=this;this.loading=!0,l.a.post(this.$api.departmentList,e).then(function(e){t.tableData=e.body,t.total=pages.body.totalCount,t.loading=!1}).catch(function(e){t.loading=!1})},getPriority:function(){var e=[],t=!0,i=!1,n=void 0;try{for(var a,o=r()(this.checkedList);!(t=(a=o.next()).done);t=!0){var s=a.value;e.push(s.priority)}}catch(e){i=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(i)throw n}}return e.join(",")},handleClose:function(e){e()},ansyTree:function(e,t){if(0===e.level)return t([{name:"根目录",id:"",isChild:!0}]);e.level>0&&l.a.post(this.$api.channelList,{parentId:e.data.id}).then(function(e){var i=[];for(var n in e.body){var a={};a.id=e.body[n].id,a.isChild=!(e.body[n].childCount>0),a.name=e.body[n].name,i.push(a)}return t(i)})},operate:function(e){this.dialogVisible=!0,this.operateType=e,this.labelDialogTitle=("copy"==e?"复制":"引用")+this.$getSiteName()},checkChange:function(e,t,i){t&&(this.currentCheckChannelId=e.id,this.$refs.channelTree.setCheckedKeys([e.id],!0))},confirm:function(){var e=this,t="",i={};if(i.channelId=this.currentCheckChannelId,i.ids=this.ids,"copy"==this.operateType)t=this.$api.contentCopy,i.siteId=this.$getSiteId();else{if("cite"!=this.operateType)return!1;t=this.$api.contentRefer}this.loading=!0,l.a.post(t,i).then(function(t){"200"==t.code&&(e.loading=!1,e.dialogVisible=!1,e.successMessage("copy"==e.operateType?"复制成功":"引用成功"))}).catch(function(t){e.loading=!1})}},created:function(){this.getTableData(this.params)},watch:{$route:function(e,t){var i=this.$route.query.id;this.params.root=i>0?i:"",this.getTableData(this.params)}}},c=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("section",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[i("div",{staticClass:"cms-list-header"},[i("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/departmentList/add",expression:"'/departmentList/add'"}],attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.routerLink("/department/save","save",0,{pid:0})}}},[e._v("添加")])],1),e._v(" "),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,stripe:""},on:{"selection-change":e.checkIds}},[i("el-table-column",{attrs:{type:"selection",width:"65",align:"right"}}),e._v(" "),i("el-table-column",{attrs:{prop:"id",label:"ID",width:"60",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"名称",align:"left"}}),e._v(" "),i("el-table-column",{attrs:{label:"排序",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-input",{attrs:{type:"number"},model:{value:t.row.priority,callback:function(i){e.$set(t.row,"priority",i)},expression:"scope.row.priority"}})]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return i("div",{},[i("button",{directives:[{name:"perms",rawName:"v-perms",value:"/department/memberList",expression:"'/department/memberList'"}],staticClass:"btn list",attrs:{title:"查看部门成员列表"},on:{click:function(i){e.routerLink("/departmentMember/list","lsit",t.row.id)}}},[i("i",{staticClass:"iconfont icon-gengduo"})]),e._v(" "),i("button",{directives:[{name:"perms",rawName:"v-perms",value:"/department/update",expression:"'/department/update'"}],staticClass:"btn edit",attrs:{title:"修改"},on:{click:function(i){e.routerLink("/department/edit","update",t.row.id)}}},[i("i",{staticClass:"iconfont icon-weibiaoti101"})]),e._v(" "),i("button",{directives:[{name:"perms",rawName:"v-perms",value:"/department/delete",expression:"'/department/delete'"}],staticClass:"btn delete",attrs:{title:"删除"},on:{click:function(i){e.deleteBatch(e.$api.departmentDelete,t.row.id)}}},[i("i",{staticClass:"iconfont icon-shanchu1"})])])}}])})],1),e._v(" "),i("div",{staticClass:"cms-list-footer"},[i("div",{staticClass:"cms-left"},[i("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/department/delete",expression:"'/department/delete'"}],attrs:{disabled:e.disabled},on:{click:function(t){e.deleteBatch(e.$api.departmentDelete,e.ids)}}},[e._v("批量删除")]),e._v(" "),i("el-button",{directives:[{name:"perms",rawName:"v-perms",value:"/department/priority",expression:"'/department/priority'"}],attrs:{disabled:e.disabled},on:{click:function(t){e.priorityBatch(e.$api.departmentPriority,e.ids,e.getPriority())}}},[e._v("保存排列顺序")])],1)])],1)},p=[],u={render:c,staticRenderFns:p},m=u,h=i("Mw9A"),f=n,v=h(d,m,!1,f,"data-v-5924939c",null);t.default=v.exports},XiJN:function(e,t,i){var n=i("mWkt");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);i("8bSs")("5b205692",n,!0)},mWkt:function(e,t,i){t=e.exports=i("BkJT")(!1),t.push([e.i,"\n.tree-left[data-v-5924939c]{\n    width: 200px;\n    float: left;\n}\n.tree-right[data-v-5924939c]{\n    margin-left: 200px;\n}\n.cms-body table .btn[data-v-5924939c] {\n    margin-top: 5px;\n    display: inline-block;\n    height: 24px;\n    width: 24px;\n    min-width: 0px;\n    line-height: 24px;\n    padding: 0px;\n    font-size: 14px;\n    color: #ffffff;\n    margin-left: 2px;\n    border: 0px;\n    border-radius: 4px;\n    -webkit-box-sizing: border-box;\n            box-sizing: border-box;\n    line-height: 1;\n}\n.cms-body table .btn .iconfont[data-v-5924939c]{\n  font-size: 14px;\n  font-weight: 100;\n  color: #ffffff;\n}\n.list[data-v-5924939c]{\n background-color: #409EFF;\n}\n.edit[data-v-5924939c]{\n  background-color: #17D57E\n}\n.delete[data-v-5924939c]{\n  background-color: #FF8B53;\n}\n.list[data-v-5924939c]:hover,\n.delete[data-v-5924939c]:hover,\n.edit[data-v-5924939c]:hover{\n  cursor: pointer;\n}\n",""])}});